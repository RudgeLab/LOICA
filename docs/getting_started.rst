Getting Started with LOICA
=============================

This beginnerâ€™s guide introduces the basic principles of LOICA for
new users. The examples discussed in this guide are excerpted
from the `Jupyter notebooks <https://github.com/RudgeLab/LOICA/tree/master/notebooks>`. 
The objective of this documentation is to
familiarize users with the basic patterns of the package. For more
comprehensive documentation about classes and methods, refer to the API reference.

-------------------------
Genetic Network Design
-------------------------

First let's create an empty ``GeneticNetwork``

.. code:: python

    >>> import loica as lc
    >>> network = lc.GeneticNetwork(vector=0)

.. end

With that we have created a network Object.
If you wonder about vector=0, this is to add a Flapjack ID which is explained later. For now all this connections will be 0.

Next, we need to add compoments to the network, these can be proteins encoded in the DNA like fluorescent proteins ``Reporter`` or transcriptional factors ``Regulators``.
Functional fragments of DNA that drives expression like a Promoter-RBS pair are considered ``Operators``.

.. code:: python

    # Create and add a GFP reporter
    >>> reporter = lc.Reporter(name='GFP', color='green', degradation_rate=1, init_concentration=0, signal_id=0)
    >>> network.add_reporter(reporter)
    
    # Create and add a Source operator
    >>> source = lc.Source(output=reporter, rate=100)
    >>> network.add_operator(source)

.. end

The ``Source`` Operator is the representation of a constitutive expression promoter with an RBS, for example J23101 and B0034.


Now let's see if design is what we intended plotting the ``GeneticNetwork``

.. code:: python
 
    >>> network.draw()

.. end

Network image

-------------------------
Simulation Setup
-------------------------

To simulate our ``GeneticNetwork`` we need to define a ``Metabolism`` for the chassis or host of this DNA.

.. code:: python
 
    >>> def growth_rate(t):
            return  0 

    >>> def biomass(t):
            return 1 

    >>> metab = lc.SimulatedMetabolism("simetab",biomass, growth_rate) 

.. end

Here the growth rate is 0 and biomass 1 to simulate a single cell experiment.

Then we need to create a ``Sample``. This ``Sample`` is a cell with the metabolism adn genetic network that we defined above.

.. code:: python
 
    >>> sample = lc.Sample(genetic_network=network, 
                            metabolism=metab)

.. end

Now to define how we will measure the ``Sample`` in the simulation we need to set an ``Assay`` where we define the samples to be measured, the number of measurements, and the interval between measurements.
Furthermore, when we run the ``Assay`` we can choose between using ODE, ODE with noise or stochastic simulation.


.. code:: python
 
    >>> assay = lc.Assay(samples, 
              n_measurements=60*24, 
              interval=1/60,
              name='Loica constitutive expression stochastic',
              description='Simulated constitutive gene generated by loica',
             )
    >>> assay.run(stochastic=True)

.. end

After run finish, all the data will be stored as Pandas DataFrame in measurements.

.. code:: python

    >>> m = assay.measurements
 
.. end
 
Finally, let's plot the GFP measurements.
 
.. code:: python

    >>> fig,ax = plt.subplots(1,1)
    >>> m[m.Signal=='GFP'].plot(x='Time', y='Measurement', style='.', ax=ax)
 
.. end

Now you have designed and simulated your first genetic network using LOICA, congrats!!
Here is a `Colab notebook <https://colab.research.google.com/drive/18dDmH9-lrrgtqZns5U3qSQBOi4eU1slz?usp=sharing>` with all the code.

